<script>
    window.updateTheme = (theme) => {
        if (!theme === 'light' || !theme === 'dark')
            return;

        const darkStyles = document.querySelectorAll("link[data-theme=dark]");
        const lightStyles = document.querySelectorAll("link[data-theme=light]");

        if (theme === 'dark') {
            console.info('ðŸŒ™ Setting dark mode');
            darkStyles.forEach(link => {
                link.media = 'all';
                link.disabled = false;
            });
            lightStyles.forEach(link => {
                link.media = 'not all';
                link.disabled = true;
            });
        }
        else {
            console.info('ðŸŒž Setting light mode');

            darkStyles.forEach(link => {
                link.media = 'not all';
                link.disabled = true;
            });
            lightStyles.forEach(link => {
                link.media = 'all';
                link.disabled = false;
            });
        }
    }
    
    (function() {
        let theme = window.localStorage.getItem('theme');
        if (theme !== 'light' &&  theme !== 'dark') {
            const darkModePreferredQuery = window.matchMedia('(prefers-color-scheme: dark)');
            theme = darkModePreferredQuery.matches ? 'dark' : 'light';
            window.localStorage.setItem('theme', theme);
        } else {
            window.updateTheme(theme);
        }    
    }());
</script>